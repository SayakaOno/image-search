(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/redvelvetcake.2fc34d65.jpg"},11:function(e,t,a){e.exports=a.p+"static/media/carrotcake.48a57335.jpg"},29:function(e,t,a){e.exports=a(68)},66:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(14),r=a.n(s),c=a(15),l=a.n(c),o=a(26),m=a(27),u=a(2),d=a(3),h=a(5),g=a(4),f=a(6),p=a(7),v=a(16),b=a.n(v),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).nameInput=i.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.term,n=e.onChange,s=e.onKeyDown;return i.a.createElement("div",{className:"ui input search"},i.a.createElement("input",{ref:this.nameInput,name:"name",type:"text",value:t,onChange:n,placeholder:"restaurant name"}),i.a.createElement("input",{name:"term",type:"text",value:a,onChange:n,onKeyDown:s,placeholder:"menu"}))}}]),t}(i.a.Component),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).getItemsWidth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,a=Array.from(e);return a.length=t,a.reduce(function(e,t){return e+t.offsetWidth},0)},a.renderItems=function(){return a.props.images.map(function(e,t){var n=t===a.props.selectedIndex?" active":"";return i.a.createElement("li",{className:"item"+n,key:e[0].term},e[0].term)})},a.onNavClick=function(e){"LI"===e.target.tagName&&(a.props.onSelect(e.target.innerHTML),a.handleScroll(e.target))},a.handleScroll=function(e){var t=document.querySelectorAll(".navbar li"),n=document.querySelector(".navbar-container");n.getBoundingClientRect().left>e.getBoundingClientRect().left?n.scrollLeft=a.getItemsWidth(t,[].slice.call(t).indexOf(e))-20:n.getBoundingClientRect().right<e.getBoundingClientRect().right&&(n.scrollLeft=a.getItemsWidth(t,[].slice.call(t).indexOf(e)))},a.state={ulWidth:0,imageListWidth:0},a.ulRef=i.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({imageListWidth:this.props.imageListWidth})}},{key:"componentDidUpdate",value:function(){if(this.ulRef.current&&this.props.imageListWidth){this.state.imageListWidth!==this.props.imageListWidth&&this.setState({imageListWidth:this.props.imageListWidth});var e=document.querySelectorAll(".navbar li"),t=this.getItemsWidth(e);if(this.state.ulWidth!==t&&this.setState(function(){return{ulWidth:t}}),this.ulRef.current.style.width=this.getUlWidth(t)+"px",e[this.props.selectedIndex]&&0!==this.props.imageListWidth){var a=this.getItemsWidth(e,this.props.selectedIndex+1)-this.props.imageListWidth+30;a>0&&setTimeout(function(){document.querySelector(".navbar-container").scrollLeft=a},0)}}}},{key:"getUlWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.ulWidth;return Math.max(this.props.imageListWidth,e+25)}},{key:"render",value:function(){return 0===this.props.images.length?null:i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"navbar-container"},i.a.createElement("ul",{ref:this.ulRef,className:"ui top tabular menu",onClick:this.onNavClick},this.renderItems())),i.a.createElement("i",{className:"fas fa-times-circle",onClick:this.props.onRemove}))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).setSpans=function(){try{var e=a.imageRef.current.clientHeight,t=Math.ceil(e/10);a.setState({spans:t})}catch(n){console.log(n)}},a.state={spans:0},a.imageRef=i.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans),window.addEventListener("resize",this.setSpans)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSpans)}},{key:"render",value:function(){var e=this.props.image,t=e.title,a=e.link;return i.a.createElement("li",{style:{gridRowEnd:"span ".concat(this.state.spans)}},i.a.createElement("img",{ref:this.imageRef,alt:t,src:a}))}}]),t}(i.a.Component),I=i.a.forwardRef(function(e,t){var a=e.images?e.images[0].list.map(function(e,t){return i.a.createElement(L,{image:e,inedex:t,key:e.title.slice(0,6)+t})}):null;return void 0===e.images?null:i.a.createElement("div",{ref:t,className:"image-list ui bottom attached active tab segment",style:{height:e.height}},i.a.createElement("div",{className:"image-frame"},i.a.createElement("div",null,i.a.createElement("ul",{className:"ui images image-ul"},a),function(){var t=e.images[0].list.length+1;return t>100?null:i.a.createElement("button",{className:"ui orange basic button ".concat(e.loading?" loading":"null"),onClick:function(){return e.onLoadMore(t)}},"More")}())))}),S=a(28),w=a.n(S).a.create({baseURL:"https://www.googleapis.com"}),x="customsearch/v1?key=AIzaSyAXRSgcZq3L6xxBwPVtJFIKtcK8tvER13g&cx=011995211852339458589:-vcn1myonvo",k=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={text:"Loading"},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loaderId=setInterval(function(){"Loading..."===e.state.text?e.setState({text:"Loading"}):e.setState(function(e){return{text:e.text+"."}})},300)}},{key:"componentWillUnmount",value:function(){clearInterval(this.loaderId)}},{key:"render",value:function(){return i.a.createElement("div",{className:"loader-frame ui segment",style:{height:window.innerHeight-40}},i.a.createElement("div",{className:"ui active inverted dimmer"},i.a.createElement("div",{className:"ui text loader"},this.state.text)))}}]),t}(i.a.Component),R=a(8),O=a.n(R),W=a(9),N=a.n(W),j=a(10),C=a.n(j),M=a(11),q=a.n(M);O.a,O.a,O.a,N.a,N.a,N.a,C.a,C.a,C.a,q.a,q.a,q.a;b.a.setAppElement(document.getElementById("root"));var B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).setImageListWidth=function(){a.imageListRef.current&&a.setState({imageListWidth:a.imageListRef.current.offsetWidth})},a.isInputEmpty=function(){return!a.state.term},a.handleChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value));setTimeout(function(){a.state.name||a.state.term?a.searchButtonRef.current.className="ui yellow button":a.searchButtonRef.current.className="ui yellow button disabled"},0)},a.onSearchSubmit=Object(o.a)(l.a.mark(function e(){var t,n,i,s,r,c,o,m,u,d=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:1,n=d.length>1&&void 0!==d[1]?d[1]:null,a.setState({loading:!0}),i=a.state.term,e.prev=4,i||(i=a.state.images[a.state.selectedIndex][0].term),e.next=8,w.get(x,{params:{searchType:"image",q:a.state.name+"+"+i,start:t}});case 8:if(s=e.sent,r=s.data.items){e.next=12;break}throw Error;case 12:if(c=a.state.selectedIndex,o=[],1===t?(m=[{term:a.state.term,list:r}],o=a.state.images.concat([m]),c=o.length-1):(u=a.state.images[c][0].list.concat(r),(o=a.state.images.slice())[c][0].list=u),!n||a.state.term){e.next=17;break}return e.abrupt("return");case 17:a.setState(function(e){return{term:"",selectedIndex:c,requestedName:a.state.name,loading:!1,images:o}}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),a.setState({loading:!1,term:""}),setTimeout(function(){return alert('I am sorry but something went wrong... :(\nPlease ask your server what "'.concat(i,'" is.'))},100);case 24:case"end":return e.stop()}},e,this,[[4,20]])})),a.handleSubmit=function(e){if(a.isInputEmpty())alert("Please enter menu!");else{var t=a.state.images.findIndex(function(e){return e[0].term===a.state.term});-1===t||a.state.name!==a.state.requestedName?(a.state.requestedName!==a.state.name&&a.setState({images:[],requestedName:""}),a.onSearchSubmit(1,e)):a.setState({selectedIndex:t,term:""})}},a.handleSelect=function(e){var t=a.state.images.findIndex(function(t){return t[0].term===e});a.setState({selectedIndex:t})},a.handleKeyDown=function(e){"Enter"===e.key&&a.handleSubmit()},a.removeNavItem=function(){var e=Math.min(a.state.images.length-2,a.state.selectedIndex);a.setState(function(t){return{images:t.images.filter(function(e,t){return a.state.selectedIndex!==t}),selectedIndex:e}})},a.renderResultComponents=function(){var e=a.state,t=e.selectedIndex,n=e.images;return i.a.createElement(i.a.Fragment,null,i.a.createElement(y,{onSelect:a.handleSelect,selectedIndex:t,imageListWidth:a.state.imageListWidth,images:n,onRemove:a.removeNavItem}),a.state.loading&&!a.state.requestedName?i.a.createElement(k,null):i.a.createElement(I,{ref:a.imageListRef,height:a.state.screenHeight-80,images:n[t],onLoadMore:a.onSearchSubmit,loading:a.state.loading}))},a.state={name:"",term:"",requestedName:"",selectedIndex:0,imageListWidth:0,loading:!1,images:[],screenHeight:0,modalIsOpen:!1},a.searchButtonRef=i.a.createRef(),a.imageListRef=i.a.createRef(),a.smLabel=i.a.createRef(),a.openModal=a.openModal.bind(Object(p.a)(Object(p.a)(a))),a.closeModal=a.closeModal.bind(Object(p.a)(Object(p.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"fixResultComponent",value:function(){var e=document.querySelector(".image-list");if(e)if(e.getBoundingClientRect().top>.4*document.documentElement.clientHeight)e.style.overflowY="hidden";else try{e.style.overflowY="scroll"}catch(t){console.log(t)}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.fixResultComponent),window.addEventListener("resize",this.setImageListWidth),this.setState({screenHeight:document.documentElement.clientHeight}),setTimeout(function(){var t=0,a=setInterval(function(){t<3?(e.smLabel.current.classList.toggle("none"),t++):(clearInterval(a),setTimeout(function(){e.smLabel.current.classList.add("none")},1500))},700)},1e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.fixResultComponent),window.removeEventListener("resize",this.setImageListWidth)}},{key:"componentDidUpdate",value:function(){this.imageListRef.current&&(this.state.imageListWidth!==this.imageListRef.current.offsetWidth&&this.setState({imageListWidth:this.imageListRef.current.offsetWidth}),this.state.screenHeight!==document.documentElement.clientHeight&&this.setState({screenHeight:document.documentElement.clientHeight}))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.term;return i.a.createElement("main",null,i.a.createElement(i.a.StrictMode,null,i.a.createElement("h1",null,"Image search",i.a.createElement("span",{className:"pc",onClick:this.openModal,"data-tooltip":"instructions","data-position":"right center"},"?"),i.a.createElement("span",{ref:this.smLabel,className:"none sm ui pointing below red basic label"},"instructions")),i.a.createElement(b.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal},i.a.createElement("div",{className:"ui modal active"},i.a.createElement("i",{className:"close icon",onClick:this.closeModal}),i.a.createElement("div",{className:"header"},"Instructions"),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"description"},i.a.createElement("ol",null,i.a.createElement("li",null,"Type restaurant and menu name",i.a.createElement("i",null,"Ex. Medina & waffle ")),i.a.createElement("li",null,"Press search button"),i.a.createElement("li",null,"Keep searching different menus until you find what you want to try!",i.a.createElement("br",null),i.a.createElement("i",null,"Ex. Paella, Cassoulet")," ")),i.a.createElement("p",null," Enjoy! :)"))),i.a.createElement("div",{className:"actions"},i.a.createElement("div",{className:"ui right labeled icon button",onClick:this.closeModal},"Got it!",i.a.createElement("i",{className:"checkmark icon"}))))),i.a.createElement(E,{ref:this.searchButtonRef,name:t,term:a,onChange:this.handleChange,onClick:this.handleSubmit,onKeyDown:this.handleKeyDown}),i.a.createElement("button",{ref:this.searchButtonRef,className:"ui yellow button disabled",onClick:this.handleSubmit},"Search"),this.renderResultComponents()))}}]),t}(n.Component);a(66);r.a.render(i.a.createElement(B,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a.p+"static/media/chocolatecake.7b396a06.jpg"},9:function(e,t,a){e.exports=a.p+"static/media/lemoncake.395df99b.jpg"}},[[29,2,1]]]);
//# sourceMappingURL=main.bed7a141.chunk.js.map